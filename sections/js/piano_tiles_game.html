<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Piano Tiles Game using HTML + CSS + JavaScript</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="shortcut icon" href="../../images/favicon.ico" >	
	<link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600|Roboto+Condensed:300,400,700" rel="stylesheet">
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css">	
    <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script> 
	<link rel="stylesheet" href="../../css/header.css"/>
	<script type="text/javascript" src="../../js/shCore.js"></script>
	<script type="text/javascript" src="../../js/shBrushCss.js"></script>
	<script type="text/javascript" src="../../js/shBrushJScript.js"></script>
	<script type="text/javascript" src="../../js/shBrushPlain.js"></script>
	<script type="text/javascript" src="../../js/shBrushXml.js"></script>
    <link type="text/css" rel="stylesheet" href="../../css/shCore.css"/>
    <link type="text/css" rel="stylesheet" href="../../css/shThemeDefault.css"/>
    <script type="text/javascript">
        SyntaxHighlighter.config.clipboardSwf = '../../clipboard.swf';
        SyntaxHighlighter.all();
    </script>
    <link rel="stylesheet" href="../styles/main.css"/	>
</head>
<body>
<header class="header-two-bars">
	<div class="header-first-bar">
		<div class="header-limiter">
			<h1><a href="../../index.html">Coding<span>flag</span></a></h1>
			<nav>
				<a href="../javascript.html" class="selected">JavaScript</a>
				<a href="../css.html">CSS</a>
				<a href="../api.html">API</a>
			</nav>
		</div>
	</div>
</header>
<div class="container main-content">
	<div class="row">
		<div class="col-xs-12 col-sm-12 col-md-8">
			<div class="card col-xs-12 col-sm-12 col-md-12">
				<div class="row">
					<div class="col-xs-12 col-sm-12 col-md-12">
						<div class="content padding">
							<h2>Piano Tiles Game using JavaScript</h2>
							<p class="posted">POSTED ON <b>APRIL 11, 2017</b></p>
							<img style="width:100%;" class="img-responsive" src="https://i.ytimg.com/vi/xQIRo8ou908/maxresdefault.jpg" alt="">
							<p class="details">
								Libraries Required 
								<br>
								jQuery.js - <a href="https://code.jquery.com/jquery-2.2.4.min.js">https://code.jquery.com/jquery-2.2.4.min.js</a>
								<br>
							</p>
							<div class="ad-mob-only">
								<div class="text-center">
									<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
									<!-- programmingTutorials c++ -->
									<ins class="adsbygoogle"
										     style="display:block"
										     data-ad-client="ca-pub-4856888960652188"
										     data-ad-slot="1149228552"
										     data-ad-format="auto"></ins>
									<script>
									   (adsbygoogle = window.adsbygoogle || []).push({});
									</script>			
								</div>
							</div>							
							<div class="code htmlCode">
								<div class="title">html</div>
				                <pre class="brush: html" style="margin-top:-10px;">
&lt;div id=&quot;mobileDisplay&quot;&gt;
  &lt;div id=&quot;game&quot;&gt;
    &lt;div id=&quot;timer&quot;&gt;&lt;/div&gt;
    &lt;div id=&quot;score&quot;&gt;&lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
								</pre> 
							</div>
							<div class="code jsCode">
								<div class="title">JavaScript</div>
				                <pre class="brush: js" style="margin-top:-10px;">
var game = document.getElementById('game');
var set = [];
var prev = 0;
var score = 0;
var times = 0;
var width = 1;
var time = 0;
var gameisover = false;
var totalTimeSecs = 60; // 60 Sec Game
var timer = setInterval(function(){
var per = Math.round((width/totalTimeSecs)*100);
  time++;
  document.getElementById('timer').style.width = per+'%';
  width++;
},1000);

var timerout = setTimeout(function(){
  gameOver();
},totalTimeSecs*1000);

function genSet(){
  var htmCode = '';
  var blackID = Math.trunc(Math.random()*3);
  if(prev == blackID){
    blackID = Math.round(Math.random()*blackID);
  }
  prev = blackID;
  var tileWidth = (($('#mobileDisplay').width())/4)-1;
  for(var i=0;i<4;i++){
    if(i==blackID){
      htmCode += '<div style="width:'+tileWidth+'px;" class="tile black"></div>'; 
    } else {
      htmCode += '<div style="width:'+tileWidth+'px;" class="tile"></div>'; 
    }
  }
  return htmCode;
}

$(window).load(function(){
  var height = $('#mobileDisplay').height()/4;
  bottom = 0;
  for(var i=0;i<5;i++)
    if(i==0){      
     $('#game').html($('#game').html()+'<div class="set current" style="bottom:'+ bottom +'px;height:'+height+'px;">' + genSet() + '</div>'); 
      bottom += height;
    } else if(i==4){
     $('#game').html($('#game').html()+'<div class="set last" style="bottom:'+ bottom +'px;height:'+height+'px;">' + genSet() + '</div>');          
         }
  else {
    $('#game').html($('#game').html()+'<div class="set" style="bottom:'+ bottom +'px;height:'+height+'px;">' + genSet() + '</div>'); 
    bottom += height;
  }
  $('.current div').click(function clicked(){
     if($(this).hasClass('black')){
      if(gameisover === false){
       $(this).css("background","rgb(170,170,170)");
       $('.last').html(genSet());
       var pos = $('.current');
       var currHtm = pos.html();
       if(times > 0){
         pos.prev().html(currHtm);
         var next1 = pos.next().html();
         var next2 = pos.next().next().html();
         var next3 = pos.next().next().next().html();
         pos.html(next1);
         pos.next().html(next2);
         pos.next().next().html(next3);
       }
       times++;
       if(times == 1){
         pos.removeClass('current').next().addClass('current');
       }
       $('.current div').each(function(){
         this.onclick = clicked;
       });
       score++;
       $('#score').text(score);
     }
    } else {
      gameisover = true;
      clearInterval(timer);
      setTimeout(gameOver,1500);     
      $(this).addClass('red');      
    }
  });  
});

function gameOver(){
    clearInterval(timer);
    clearTimeout(timerout);
    var num = score/time;
    if(isNaN(num)){ num=0; }
    $('#mobileDisplay').css('background','tomato').css('color','white');
    $('#game').html('<center><h1 style="margin-top:100px;">Game Over</h1><h3>Score : '+num.toFixed(4)+' tiles/sec </h3><a class="button button-block" onclick="window.location.assign(\'index.html\');">Play Again</a></center>');
}				                </pre> 
							</div>
							<div class="code cssCode">
								<div class="title">css</div>
				                <pre class="brush: css" style="margin-top:-10px;">
body {
  margin:0px;
  overflow:hidden;
}
#mobileDisplay {
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  width:270px;
  height:400px;
  border:10px solid rgb(150,150,100);
  border-radius:10px;
  overflow:hidden;
}
.set {
  width:100%;
  position:fixed;
}
.set.hide {
  display:none;
}
.set div{
  content:' ';
  float:left;
  height:100%;
  background:#f7f7f7;
  border:0.08em groove rgb(80,80,80);
  border-right:none;
  border-top:none;
}
.set div.black {
  background:black;
}
.set div.red {
  animation: over 0.4s linear 6;
  transition: all 0.5s ease;
}
.prev .black {
  background:rgb(200,200,200);
}
#timer {
  position: fixed;
  top: 0px;
  width: 1px;
  height: 6px;
  background: #00acee;
  z-index: 100;
  border-radius:2px;
  transition:all 0.3s linear;
}
#score {
  position: fixed;
  top: 22px;
  width: 100%;
  text-align: center;
  color:tomato;
  font-size: 32px;

  font-weight: 600;
  z-index: 100;
  transition:all 0.2s linear;
}
@keyframes over {
  from {
    background: #f7f7f7;
  }
  to {
    background: tomato;
  }
}
				                </pre> 
							</div>
							<div class="codepen-embed">
								<p data-height="485" data-theme-id="dark" data-slug-hash="KmPwBM" data-default-tab="result" data-user="dsr" data-embed-version="2" data-pen-title="Piano Tiles [ JavaScript ]" data-preview="true" class="codepen">See the Pen <a href="http://codepen.io/dsr/pen/KmPwBM/">Piano Tiles [ JavaScript ]</a> by Darshan Rajadhyaksha (<a href="http://codepen.io/dsr">@dsr</a>) on <a href="http://codepen.io">CodePen</a>.</p>
<script async src="https://production-assets.codepen.io/assets/embed/ei.js"></script>
							</div>
						</div>
					</div>
				</div>
			</div>			
		</div>
		<div class="col-xs-12 col-sm-12 col-md-4">
			<div class="row">
				<div class="col-xs-12 col-sm-12 col-md-12 socialIcons">
					<div class="col-xs-2">
						<a target="_blank" href="https://github.com/codingDSR">
							<i class="fa fa-github" aria-hidden="true"></i>
						</a>
					</div>
					<div class="col-xs-2">
						<a target="_blank" href="http://fb.com/codingflag">
							<i class="fa fa-facebook" aria-hidden="true"></i>
						</a>						
					</div>
					<div class="col-xs-2">
						<a target="_blank" href="http://codepen.io/dsr/">
							<i class="fa fa-codepen" aria-hidden="true"></i>
						</a>						
					</div>
					<div class="col-xs-2">
						<a target="_blank" href="http://twitter.com/dsr3217">
							<i class="fa fa-twitter" aria-hidden="true"></i>
						</a>						
					</div>
					<div class="col-xs-2">
						<a target="_blank" href="http://instagram.com/darshan.rajadhyaksha">
							<i class="fa fa-instagram" aria-hidden="true"></i>
						</a>						
					</div>
					<div class="col-xs-2">
						<a target="_blank" href="mailto:darshan3217@gmail.com">
							<i class="fa fa-envelope" aria-hidden="true"></i>
						</a>						
					</div>
				</div>
			</div>
			
			<div style="margin-top:25px;" class="text-center">
				<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>	
					<ins class="adsbygoogle"
			     			style="display:block"
			     			data-ad-client="ca-pub-4856888960652188"
			     			data-ad-slot="5706298154"
			     			data-ad-format="auto">
			  		</ins>
					<script>
						(adsbygoogle = window.adsbygoogle || []).push({});
					</script>				
			</div>
			
			<div style="margin-top:20px;" class="text-center">
				<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
				<!-- programmingTutorials c++ -->
				<ins class="adsbygoogle"
					     style="display:block"
					     data-ad-client="ca-pub-4856888960652188"
					     data-ad-slot="1149228552"
					     data-ad-format="auto"></ins>
				<script>
				   (adsbygoogle = window.adsbygoogle || []).push({});
				</script>			
			</div>
			
		</div>
	</div>
</div>
</body>
</html>
